---
globs: '**/*.{less,css}'
description: æ ·å¼ç¼–å†™è§„èŒƒ - BEM å‘½åã€Less ä½¿ç”¨ã€CSS Modulesã€ç§»åŠ¨ç«¯é€‚é…
---

# æ ·å¼ç¼–å†™è§„èŒƒ

## ğŸ¨ BEM å‘½åè§„èŒƒ

### BEM å‘½åç»“æ„

```
Block_Element__Modifier
```

### æ ¸å¿ƒè§„åˆ™

1. **Blockï¼ˆå—ï¼‰**ï¼šç‹¬ç«‹çš„ç»„ä»¶ï¼Œä½¿ç”¨å°é©¼å³°ï¼ˆcamelCaseï¼‰
2. **Elementï¼ˆå…ƒç´ ï¼‰**ï¼šBlock çš„ç»„æˆéƒ¨åˆ†ï¼Œä½¿ç”¨**å•ä¸‹åˆ’çº¿ `_`** è¿æ¥
3. **Modifierï¼ˆä¿®é¥°ç¬¦ï¼‰**ï¼šBlock æˆ– Element çš„å˜ä½“ï¼Œä½¿ç”¨**åŒä¸‹åˆ’çº¿ `__`** è¿æ¥

### è¯¦ç»†è¯´æ˜

#### Block å‘½å

- ç¬¬ä¸€ä¸ªå•è¯å°å†™ï¼Œåç»­å•è¯é¦–å­—æ¯å¤§å†™
- é¡µé¢å»ºè®®ä½¿ç”¨ `é¡µé¢å + Page` æ ¼å¼
- ç»„ä»¶å»ºè®®ä½¿ç”¨åŠŸèƒ½åç§°

```less
// âœ… æ­£ç¡®
.loginPage {
} // ç™»å½•é¡µé¢
.homePage {
} // é¦–é¡µ
.userCard {
} // ç”¨æˆ·å¡ç‰‡
.productList {
} // äº§å“åˆ—è¡¨
.navBar {
} // å¯¼èˆªæ 

// âŒ é”™è¯¯
.LoginPage {
} // ä¸ä½¿ç”¨ PascalCase
.login-page {
} // ä¸ä½¿ç”¨ kebab-case
.login_page {
} // ä¸ä½¿ç”¨ snake_case
```

#### Element å‘½å

- Block åç§° + å•ä¸‹åˆ’çº¿ `_` + å…ƒç´ åç§°ï¼ˆå°é©¼å³°ï¼‰
- è¡¨ç¤º Block çš„ç»„æˆéƒ¨åˆ†

```less
// âœ… æ­£ç¡®
.loginPage_header {
} // ç™»å½•é¡µçš„å¤´éƒ¨
.loginPage_form {
} // ç™»å½•é¡µçš„è¡¨å•
.loginPage_submitButton {
} // ç™»å½•é¡µçš„æäº¤æŒ‰é’®
.userCard_avatar {
} // ç”¨æˆ·å¡ç‰‡çš„å¤´åƒ
.userCard_userName {
} // ç”¨æˆ·å¡ç‰‡çš„ç”¨æˆ·å

// âŒ é”™è¯¯
.loginPage-header {
} // ä½¿ç”¨ `-`
.loginPage__header {
} // ä½¿ç”¨ `__`ï¼ˆè¿™æ˜¯ Modifierï¼‰
.header {
} // ç¼ºå°‘ Block å‰ç¼€
.loginPageHeader {
} // ç›´æ¥è¿æ¥ï¼ˆæ— åˆ†éš”ç¬¦ï¼‰
```

#### Modifier å‘½å

- Block/Element åç§° + åŒä¸‹åˆ’çº¿ `__` + ä¿®é¥°ç¬¦åç§°ï¼ˆå°é©¼å³°ï¼‰
- è¡¨ç¤ºçŠ¶æ€ã€å˜ä½“æˆ–ä¸åŒç‰ˆæœ¬

```less
// âœ… æ­£ç¡®ï¼šBlock çš„ Modifier
.loginPage__loading {
} // ç™»å½•é¡µçš„åŠ è½½çŠ¶æ€
.loginPage__disabled {
} // ç™»å½•é¡µçš„ç¦ç”¨çŠ¶æ€
.userCard__active {
} // ç”¨æˆ·å¡ç‰‡çš„æ¿€æ´»çŠ¶æ€
.userCard__compact {
} // ç”¨æˆ·å¡ç‰‡çš„ç´§å‡‘æ¨¡å¼

// âœ… æ­£ç¡®ï¼šElement çš„ Modifier
.loginPage_button__primary {
} // ç™»å½•é¡µæŒ‰é’®çš„ä¸»è¦æ ·å¼
.loginPage_button__disabled {
} // ç™»å½•é¡µæŒ‰é’®çš„ç¦ç”¨çŠ¶æ€
.userCard_avatar__large {
} // ç”¨æˆ·å¡ç‰‡å¤´åƒçš„å¤§å°ºå¯¸

// âŒ é”™è¯¯
.loginPage-loading {
} // ä½¿ç”¨ `-`
.loginPage--loading {
} // ä½¿ç”¨ `--`ï¼ˆå·²ç¦æ­¢ï¼‰
.loginPage_loading {
} // ä½¿ç”¨å•ä¸‹åˆ’çº¿ï¼ˆè¿™æ˜¯ Elementï¼‰
```

### å‘½åå¯¹ç…§è¡¨

| ç±»å‹               | è¿æ¥ç¬¦     | ç¤ºä¾‹                         | åœºæ™¯                |
| ------------------ | ---------- | ---------------------------- | ------------------- |
| Block              | æ—          | `.loginPage`                 | ç‹¬ç«‹ç»„ä»¶            |
| Element            | `_`        | `.loginPage_header`          | Block çš„ç»„æˆéƒ¨åˆ†    |
| Modifier           | `__`       | `.loginPage__loading`        | Block çš„çŠ¶æ€/å˜ä½“   |
| Element + Modifier | `_` + `__` | `.loginPage_button__primary` | Element çš„çŠ¶æ€/å˜ä½“ |

## ğŸ“ Less ç¼–å†™è§„èŒƒ

### 1. ä½¿ç”¨åµŒå¥—ä¿æŒ BEM ç»“æ„

```less
// âœ… æ¨èï¼šä½¿ç”¨ LESS åµŒå¥—ï¼Œä½†ä¿æŒ BEM å‘½åæ¸…æ™°
.loginPage {
  display: flex;
  min-height: 100vh;
  background: #f5f5f5;

  // Element: loginPage_header
  &_header {
    padding: 16px;
    background: #fff;

    // Modifier: loginPage_header__sticky
    &__sticky {
      position: sticky;
      top: 0;
    }
  }

  // Element: loginPage_content
  &_content {
    flex: 1;
    padding: 16px;
  }

  // Element: loginPage_button
  &_button {
    height: 44px;
    border-radius: 8px;

    // Modifier: loginPage_button__primary
    &__primary {
      background: #1677ff;
      color: #fff;
    }

    // Modifier: loginPage_button__disabled
    &__disabled {
      opacity: 0.5;
      pointer-events: none;
    }
  }
}

// Modifier: loginPage__fullscreen
.loginPage__fullscreen {
  height: 100vh;
  overflow: hidden;
}
```

### 2. ä½¿ç”¨å…¨å±€å˜é‡

```less
// å¯¼å…¥å…¨å±€å˜é‡
@import '@/styles/variables.less';

.myPage {
  // âœ… ä½¿ç”¨å…¨å±€å˜é‡
  color: @primary-color;
  font-size: @font-size-base;
  padding: @spacing-base;
  border-radius: @border-radius-base;

  &_header {
    background: @bg-color-light;
    box-shadow: @box-shadow-base;
  }

  &_button {
    height: @button-height-base;

    &__primary {
      background: @primary-color;

      &:hover {
        background: @primary-color-hover;
      }
    }
  }
}
```

### 3. å“åº”å¼è®¾è®¡

```less
.myPage {
  padding: 16px;

  // å°å±å¹•
  @media (max-width: 375px) {
    padding: 12px;
  }

  // å¤§å±å¹•
  @media (min-width: 768px) {
    max-width: 750px;
    margin: 0 auto;
  }

  &_content {
    font-size: 14px;

    @media (max-width: 375px) {
      font-size: 12px;
    }
  }
}
```

## ğŸ¯ CSS Modules

### 1. æ–‡ä»¶å‘½å

- æ ·å¼æ–‡ä»¶å¿…é¡»ä½¿ç”¨ `.module.less` åç¼€
- ä¸ç»„ä»¶æ–‡ä»¶åŒå

```
Component/
â”œâ”€â”€ index.tsx
â””â”€â”€ index.module.less    âœ… å¿…é¡»ä½¿ç”¨ .module.less
```

### 2. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```typescript
import styles from './index.module.less'

const MyPage: FC = () => {
  return (
    <div className={styles.myPage}>
      <div className={styles.myPage_header}>
        <h1 className={styles.myPage_title}>æ ‡é¢˜</h1>
      </div>

      {/* ä½¿ç”¨å¤šä¸ªç±»å */}
      <button
        className={`${styles.myPage_button} ${styles.myPage_button__primary}`}
      >
        æŒ‰é’®
      </button>

      {/* æ¡ä»¶ç±»å */}
      <div
        className={`${styles.myPage_content} ${isLoading ? styles.myPage__loading : ''}`}
      >
        å†…å®¹
      </div>
    </div>
  )
}
```

### 3. ä½¿ç”¨ classnames åº“

```typescript
import classNames from 'classnames'
import styles from './index.module.less'

const MyPage: FC = () => {
  const [isActive, setIsActive] = useState(false)
  const [isLoading, setIsLoading] = useState(false)

  return (
    <div
      className={classNames(
        styles.myPage,
        {
          [styles.myPage__active]: isActive,
          [styles.myPage__loading]: isLoading,
        }
      )}
    >
      <button
        className={classNames(
          styles.myPage_button,
          styles.myPage_button__primary,
          {
            [styles.myPage_button__disabled]: isLoading,
          }
        )}
      >
        æŒ‰é’®
      </button>
    </div>
  )
}
```

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…

### 1. px è‡ªåŠ¨è½¬ rem

é¡¹ç›®å·²é…ç½® `postcss-pxtorem`ï¼Œè‡ªåŠ¨å°† px è½¬æ¢ä¸º remï¼š

- **åŸºå‡†å€¼**ï¼š37.5ï¼ˆåŸºäº 375px è®¾è®¡ç¨¿ï¼‰
- **ä½¿ç”¨æ–¹å¼**ï¼šç›´æ¥å†™ pxï¼Œè‡ªåŠ¨è½¬æ¢
- **å¿½ç•¥è§„åˆ™**ï¼š`:root` é€‰æ‹©å™¨ä¸­çš„ px ä¸è½¬æ¢

```less
.myPage {
  // å¼€å‘æ—¶å†™ px
  padding: 16px; // è‡ªåŠ¨è½¬ä¸º 0.42667rem
  font-size: 14px; // è‡ªåŠ¨è½¬ä¸º 0.37333rem
  margin-top: 20px; // è‡ªåŠ¨è½¬ä¸º 0.53333rem

  &_button {
    height: 44px; // è‡ªåŠ¨è½¬ä¸º 1.17333rem
    width: 100px; // è‡ªåŠ¨è½¬ä¸º 2.66667rem
  }
}

// âœ… ä¸è½¬æ¢ï¼š`:root` ä¸­çš„å€¼
:root {
  --primary-color: #1677ff;
  --font-size: 14px; // è¿™é‡Œçš„ px ä¸ä¼šè½¬æ¢
}

// âœ… ä¸è½¬æ¢ï¼šå°äºç­‰äº 1px çš„å€¼
.myPage_border {
  border: 1px solid #eee; // 1px ä¸ä¼šè½¬æ¢ï¼Œä¿æŒè¾¹æ¡†æ¸…æ™°
}
```

### 2. è§†å£é…ç½®

åœ¨ `index.html` ä¸­å·²é…ç½®ï¼š

```html
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
/>
```

### 3. å®‰å…¨åŒºåŸŸé€‚é…ï¼ˆiPhone X ç­‰ï¼‰

```less
.myPage {
  padding-bottom: 20px;

  // æ”¯æŒå®‰å…¨åŒºåŸŸ
  padding-bottom: constant(safe-area-inset-bottom); // iOS 11.0-11.2
  padding-bottom: env(safe-area-inset-bottom); // iOS 11.2+
}

.myPage_footer {
  position: fixed;
  bottom: 0;
  padding-bottom: 10px;

  // åŠ ä¸Šå®‰å…¨åŒºåŸŸé«˜åº¦
  padding-bottom: calc(10px + constant(safe-area-inset-bottom));
  padding-bottom: calc(10px + env(safe-area-inset-bottom));
}
```

## ğŸ¨ è¦†ç›–ç¬¬ä¸‰æ–¹ç»„ä»¶æ ·å¼

### 1. ä½¿ç”¨ :global()

```less
.myPage {
  // âœ… è¦†ç›– antd-mobile ç»„ä»¶æ ·å¼
  :global(.adm-button) {
    height: 48px;
    border-radius: 8px;
  }

  :global(.adm-input) {
    font-size: 16px;
  }

  // âœ… é™å®šä½œç”¨åŸŸ
  &_form {
    :global(.adm-form-item) {
      margin-bottom: 16px;
    }

    :global(.adm-form-item-label) {
      font-size: 14px;
      font-weight: 500;
    }
  }
}
```

### 2. ä¸»é¢˜å®šåˆ¶

```less
// src/styles/variables.less

// antd-mobile ä¸»é¢˜å˜é‡
:root:root {
  --adm-color-primary: #1677ff;
  --adm-color-success: #00b578;
  --adm-color-warning: #ff8f1f;
  --adm-color-danger: #ff3141;

  --adm-font-size-main: 14px;
  --adm-border-radius: 8px;
}
```

## ğŸ“ æ ·å¼æœ€ä½³å®è·µ

### 1. ä¿æŒç®€æ´

```less
// âœ… æ¨èï¼šæ¸…æ™°çš„å±‚çº§
.myPage {
  &_header {
  }
  &_content {
  }
  &_footer {
  }
}

// âŒ ä¸æ¨èï¼šè¿‡æ·±çš„åµŒå¥—
.myPage {
  &_header {
    &_top {
      &_left {
        &_icon {
        } // åµŒå¥—å¤ªæ·±
      }
    }
  }
}
```

### 2. é¿å…é‡å¤

```less
// âœ… æ¨èï¼šä½¿ç”¨ Less å˜é‡å’Œæ··åˆ
@button-height: 44px;
@button-radius: 8px;

.buttonMixin() {
  height: @button-height;
  border-radius: @button-radius;
  font-size: 16px;
}

.myPage_button {
  .buttonMixin();

  &__primary {
    background: #1677ff;
  }

  &__danger {
    background: #ff3141;
  }
}

// âŒ ä¸æ¨èï¼šé‡å¤çš„æ ·å¼
.myPage_button {
  height: 44px;
  border-radius: 8px;
  font-size: 16px;
  background: #1677ff;
}

.myPage_dangerButton {
  height: 44px; // é‡å¤
  border-radius: 8px; // é‡å¤
  font-size: 16px; // é‡å¤
  background: #ff3141;
}
```

### 3. ä½¿ç”¨è¯­ä¹‰åŒ–çš„å‘½å

```less
// âœ… æ¨èï¼šè¯­ä¹‰åŒ–
.productCard_price {
}
.productCard_discount {
}
.productCard_addToCart {
}

// âŒ ä¸æ¨èï¼šä¸è¯­ä¹‰åŒ–
.productCard_text1 {
}
.productCard_text2 {
}
.productCard_btn {
}
```

## ğŸš« å¸¸è§é”™è¯¯

### âŒ é”™è¯¯ç¤ºä¾‹

```less
// é”™è¯¯ 1: ä½¿ç”¨ kebab-case
.login-page {
}
.login-page-header {
}

// é”™è¯¯ 2: Element ä½¿ç”¨åŒä¸‹åˆ’çº¿
.loginPage__header {
} // åº”è¯¥ç”¨å•ä¸‹åˆ’çº¿

// é”™è¯¯ 3: Modifier ä½¿ç”¨å•ä¸‹åˆ’çº¿
.loginPage_loading {
} // åº”è¯¥ç”¨åŒä¸‹åˆ’çº¿

// é”™è¯¯ 4: ç¼ºå°‘ Block å‰ç¼€
.header {
}
.content {
}
.button {
}

// é”™è¯¯ 5: è¿‡æ·±çš„åµŒå¥—
.myPage {
  .header {
    .top {
      .left {
        .icon {
        } // å¤ªæ·±
      }
    }
  }
}

// é”™è¯¯ 6: ä¸ä½¿ç”¨ CSS Modules
.myPage {
} // æ–‡ä»¶ååº”è¯¥æ˜¯ .module.less

// é”™è¯¯ 7: ç¡¬ç¼–ç å€¼
.myPage {
  color: #1677ff; // åº”è¯¥ä½¿ç”¨å˜é‡
  padding: 16px;
  font-size: 14px;
}
```

### âœ… æ­£ç¡®ç¤ºä¾‹

```less
// æ­£ç¡® 1: ä½¿ç”¨å°é©¼å³° BEM
.loginPage {
}
.loginPage_header {
}

// æ­£ç¡® 2: Element ä½¿ç”¨å•ä¸‹åˆ’çº¿
.loginPage_header {
}

// æ­£ç¡® 3: Modifier ä½¿ç”¨åŒä¸‹åˆ’çº¿
.loginPage__loading {
}

// æ­£ç¡® 4: åŒ…å« Block å‰ç¼€
.loginPage_header {
}
.loginPage_content {
}
.loginPage_button {
}

// æ­£ç¡® 5: åˆç†çš„åµŒå¥—
.myPage {
  &_header {
  }
  &_content {
  }
  &_footer {
  }
}

// æ­£ç¡® 6: ä½¿ç”¨ CSS Modules
// æ–‡ä»¶å: index.module.less
.myPage {
}

// æ­£ç¡® 7: ä½¿ç”¨å˜é‡
@import '@/styles/variables.less';

.myPage {
  color: @primary-color;
  padding: @spacing-base;
  font-size: @font-size-base;
}
```

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

### BEM å‘½åé€ŸæŸ¥

```less
// Block
.myPage {
}

// Elementï¼ˆå•ä¸‹åˆ’çº¿ _ï¼‰
.myPage_header {
}
.myPage_content {
}
.myPage_footer {
}

// Modifierï¼ˆåŒä¸‹åˆ’çº¿ __ï¼‰
.myPage__loading {
}
.myPage__active {
}
.myPage__disabled {
}

// Element + Modifier
.myPage_button__primary {
}
.myPage_button__disabled {
}
```

### å¸¸ç”¨ Less æŠ€å·§

```less
// å˜é‡
@primary-color: #1677ff;
@spacing-base: 16px;

// æ··åˆï¼ˆMixinï¼‰
.flexCenter() {
  display: flex;
  align-items: center;
  justify-content: center;
}

// ä½¿ç”¨
.myPage {
  .flexCenter();
  color: @primary-color;
  padding: @spacing-base;
}

// åµŒå¥—
.myPage {
  &_header {
  }

  &:hover {
  }

  &__active {
  }
}
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡µé¢å¼€å‘è§„èŒƒ](mdc:.cursor/rules/page-development.mdc)
- [å…¨å±€æ ·å¼å˜é‡](mdc:src/styles/variables.less)
- [æ ·å¼é‡ç½®](mdc:src/styles/reset.less)
- [è¯¦ç»†é¡µé¢è§„èŒƒæ–‡æ¡£](mdc:docs/PAGE_GUIDE.md)
